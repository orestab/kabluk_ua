<!doctype html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>KABLUK | SALE</title>
    <style>
      /* Стилізація фільтрів */
      .filter-wrapper {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-bottom: 40px;
        flex-wrap: wrap;
        padding: 0 20px;
      }

      .filter-btn {
        background: transparent;
        border: 1px solid #e0e0e0;
        padding: 10px 25px;
        font-size: 13px;
        letter-spacing: 1.5px;
        text-transform: uppercase;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        border-radius: 30px;
      }

      .filter-btn:hover {
        border-color: #000;
        transform: translateY(-2px);
      }

      .filter-btn.active {
        background: #000;
        color: #fff;
        border-color: #000;
      }

      .products-grid {
        transition:
          opacity 0.3s ease,
          transform 0.3s ease;
      }
      .cart-modal {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.9); /* По центру, трохи зменшений */
        width: 90%;
        max-width: 500px;
        max-height: 95vh;
        background: white;
        z-index: 1001;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease-in-out;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        padding: 30px;
        border-radius: 0; /* Тримаємо мінімалізм KABLUK */
      }

      /* Коли кошик активний */
      .cart-modal.active {
        opacity: 1;
        visibility: visible;
        transform: translate(-50%, -50%) scale(1);
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 2px solid #000;
        padding-bottom: 15px;
        margin-bottom: 20px;
      }

      .close-modal-x {
        background: none;
        border: none;
        font-size: 30px;
        cursor: pointer;
      }

      #cart-items {
        max-height: 400px; /* Обмежуємо висоту, якщо товарів багато */
        overflow-y: auto;
      }

      .modal-footer {
        margin-top: 20px;
        border-top: 1px solid #eee;
        padding-top: 20px;
      }

      #cart-total {
        font-size: 18px;
        font-weight: bold;
        text-align: right;
        margin-bottom: 20px;
      }

      .checkout-btn {
        width: 100%;
        background: #000;
        color: #fff;
        padding: 15px;
        border: none;
        font-weight: bold;
        letter-spacing: 2px;
        cursor: pointer;
        margin-bottom: 10px;
        transition: 0.3s;
      }

      .checkout-btn:hover {
        background: #333;
      }

      .continue-shopping {
        width: 100%;
        background: transparent;
        border: 1px solid #ccc;
        padding: 10px;
        cursor: pointer;
        font-size: 12px;
        letter-spacing: 1px;
      }
      @media (max-width: 480px) {
        .cart-modal {
          width: 95%;
          padding: 15px;
          max-height: 90vh; /* На телефонах можна трохи вище */
        }

        .modal-header h3 {
          font-size: 16px;
        }

        .checkout-btn {
          padding: 12px;
          font-size: 11px;
        }
      } /* Модальне вікно Вибраного */
      /* Спільні стилі для обох модальних вікон */
      /* ================================================= */
      /* ОБ'ЄДНАНІ СТИЛІ МОДАЛЬНИХ ВІКОН (KABLUK UI)     */
      /* ================================================= */

      /* 1. ЗАГАЛЬНА СТРУКТУРА ВІКОН */
      .cart-modal,
      .fav-modal {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.9);
        width: 90%;
        max-width: 450px;
        height: 85vh; /* Збільшена висота */
        background: white;
        z-index: 1001;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        padding: 25px;
        display: flex;
        flex-direction: column; /* Шапка - Товари - Кнопки */
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
        overflow: hidden; /* Щоб не скролилось саме вікно */
      }

      /* Активація вікна */
      .cart-modal.active,
      .fav-modal.active {
        opacity: 1;
        visibility: visible;
        transform: translate(-50%, -50%) scale(1);
      }

      /* 2. ШАПКА (Header) */
      .modal-header {
        flex-shrink: 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-bottom: 15px;
        border-bottom: 2px solid #000;
      }

      .modal-header h3 {
        margin: 0;
        letter-spacing: 2px;
        font-size: 18px;
        text-transform: uppercase;
      }

      .close-modal-x {
        background: none;
        border: none;
        font-size: 28px;
        cursor: pointer;
        line-height: 1;
      }

      /* 3. ОБЛАСТЬ ТОВАРІВ ТА ПРОКРУТКА */
      #cart-items,
      #fav-items {
        flex-grow: 1; /* Займає все місце, що залишилося */
        overflow-y: auto !important; /* Вмикає прокрутку */
        overflow-x: hidden;
        margin: 15px 0;
        padding-right: 10px;

        /* Ліміт висоти: після ~4 товарів вмикається скрол */
        max-height: calc(100% - 150px);

        scroll-behavior: smooth;
        -webkit-overflow-scrolling: touch;
      }

      /* Кастомний скролбар */
      #cart-items::-webkit-scrollbar,
      #fav-items::-webkit-scrollbar {
        width: 5px;
      }
      #cart-items::-webkit-scrollbar-track,
      #fav-items::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 10px;
      }
      #cart-items::-webkit-scrollbar-thumb,
      #fav-items::-webkit-scrollbar-thumb {
        background: #000;
        border-radius: 10px;
      }

      /* 4. ФУТЕР (Кнопки завжди знизу) */
      .modal-footer {
        flex-shrink: 0;
        margin-top: auto;
        padding-top: 15px;
        border-top: 1px solid #eee;
        background: white;
      }

      #cart-total {
        font-size: 18px;
        font-weight: bold;
        text-align: right;
        margin-bottom: 15px;
      }

      .checkout-btn {
        width: 100%;
        background: #000;
        color: #fff;
        padding: 15px;
        border: none;
        font-weight: bold;
        letter-spacing: 2px;
        cursor: pointer;
        text-transform: uppercase;
      }

      .continue-shopping {
        width: 100%;
        background: transparent;
        border: 1px solid #ccc;
        padding: 10px;
        margin-top: 10px;
        cursor: pointer;
        font-size: 11px;
        text-transform: uppercase;
      }

      /* 5. АДАПТАЦІЯ ДЛЯ МОБІЛКИ (Зсув вліво) */
      @media (max-width: 480px) {
        .cart-modal,
        .fav-modal {
          left: 0 !important;
          top: 50% !important;
          transform: translate(
            0,
            -50%
          ) !important; /* Притиснуто до лівого краю */

          width: 80% !important; /* 20% екрана справа вільно */
          max-width: 320px;
          height: 85vh;

          padding: 20px 15px;
          border-radius: 0 20px 20px 0; /* Заокруглення тільки справа */
        }

        .modal-header h3 {
          font-size: 15px;
        }

        #cart-items,
        #fav-items {
          /* Коригуємо висоту під мобільний екран */
          max-height: calc(100% - 130px);
        }
      }

      /* Рядок товару (для стабільної висоти) */
      .item-row,
      .fav-item-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px 0;
        border-bottom: 1px solid #f5f5f5;
        min-height: 90px;
      }

      .item-row img,
      .fav-item-row img {
        width: 60px;
        height: 60px;
        object-fit: cover;
        margin-right: 15px;
      }

      /* Оверлей (фон) */
      #overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.4);
        backdrop-filter: blur(2px);
        z-index: 1000;
        display: none;
      }
    </style>
  </head>
  <body>
    <div class="overlay" id="overlay"></div>

    <nav class="side-panel" id="side-panel">
      <div class="panel-header">
        <button class="close-btn" id="close-btn">&times;</button>
      </div>
      <ul class="panel-links">
        <li><a href="catalog.html">КАТАЛОГ</a></li>
        <li><a href="men.html">ЧОЛОВІЧИЙ</a></li>
        <li><a href="women.html">ЖІНОЧИЙ</a></li>
        <li><a href="sale.html">SALE</a></li>
      </ul>
    </nav>

    <div id="fav-panel" class="fav-modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>ВИБРАНЕ</h3>
          <button onclick="closePanels()" class="close-modal-x">&times;</button>
        </div>

        <div id="fav-items"></div>
      </div>
    </div>

    <div id="cart-panel" class="cart-modal">
      <div class="modal-header">
        <h3>КОШИК</h3>
        <button onclick="closePanels()" class="close-modal-x">&times;</button>
      </div>
      <a href="orders.html" class="orders-link">МОЇ ЗАМОВЛЕННЯ</a>
      <div id="cart-items"></div>
      <div class="modal-footer">
        <div id="cart-total">Разом: 0 грн</div>
      </div>
    </div>
    <header class="header">
      <div class="nav-left">
        <a href="#" id="burger-trigger">
          <img src="burger.png" alt="Menu" />
        </a>
      </div>

      <div class="nav-center">
        <a href="index.html">
          <img src="logo.png" alt="Logo" class="logo" />
        </a>
      </div>

      <div class="nav-right">
        <div class="nav-icons">
          <div id="fav-trigger" class="icon-wrapper">
            <img src="heart-empty.png" id="main-heart" alt="Wishlist" />
            <span id="fav-count" class="badge-count">0</span>
          </div>

          <div id="cart-trigger" class="icon-wrapper">
            <img src="cart.png" alt="Cart" />
            <span id="cart-count" class="badge-count">0</span>
          </div>
        </div>

        <div class="profile-container">
          <a href="#" id="auth-trigger">
            <img src="register.png" alt="Account" />
          </a>
          <div class="profile-dropdown" id="profile-dropdown">
            <p id="display-email">Користувач</p>
            <div class="dropdown-divider"></div>
            <button onclick="handleLogout()" class="logout-btn">ВИЙТИ</button>
          </div>
        </div>
      </div>
    </header>

    <main class="page-content" style="text-align: center">
      <h1 class="page-title" style="color: #ff0000; margin-top: 40px">SALE</h1>
      <p style="margin-bottom: 30px; letter-spacing: 2px">
        НАЙКРАЩІ ПРОПОЗИЦІЇ
      </p>

      <div class="filter-wrapper">
        <button class="filter-btn active" onclick="filterSale('Усі', this)">
          Усі
        </button>
        <button class="filter-btn" onclick="filterSale('Футболка', this)">
          Футболки
        </button>
        <button class="filter-btn" onclick="filterSale('Кофта', this)">
          Кофти
        </button>
        <button class="filter-btn" onclick="filterSale('Худі', this)">
          Худі
        </button>
        <button class="filter-btn" onclick="filterSale('Взуття', this)">
          Взуття
        </button>
      </div>

      <div class="products-grid" id="sale-container"></div>
    </main>

    <footer class="footer">
      <div class="footer-content">
        <h2 class="brand-name">KABLUK</h2>
        <p class="est">ESTABLISHED 2026</p>
        <a href="https://t.me/kabulkks" target="_blank" class="tg-btn"
          >FOLLOW ON TELEGRAM</a
        >
        <div class="footer-links">
          <a href="#">Про нас</a>
          <a href="#">Доставка</a>
          <a href="#">Повернення</a>
          <a href="#">Контакти</a>
        </div>
        <p class="copyright">© 2026 KABLUK. ALL RIGHTS RESERVED.</p>
      </div>
    </footer>

    <script type="module" src="script.js"></script>

    <script>
      /**
       * Функція фільтрації для сторінки SALE
       */
      window.filterSale = function (category, btn) {
        // 1. Кнопки
        const allButtons = document.querySelectorAll(".filter-btn");
        allButtons.forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");

        const container = document.getElementById("sale-container");
        if (!container) return;

        // 2. Анімація
        container.style.opacity = "0";
        container.style.transform = "translateY(10px)";

        setTimeout(() => {
          const cards = container.querySelectorAll(".product-card");
          let foundAny = false;

          cards.forEach((card) => {
            const cardCategory = card.getAttribute("data-category");

            if (category === "Усі" || cardCategory === category) {
              card.style.display = "block";
              foundAny = true;
            } else {
              card.style.display = "none";
            }
          });

          // 3. Якщо нічого не знайдено
          const existingNoMsg = document.getElementById("no-sale-results");
          if (!foundAny) {
            if (!existingNoMsg) {
              const msg = document.createElement("div");
              msg.id = "no-sale-results";
              msg.innerHTML = `<p style="grid-column: 1/-1; text-align: center; padding: 40px; color: #888; letter-spacing: 2px;">АКЦІЙНИХ ТОВАРІВ ЦІЄЇ КАТЕГОРІЇ ПОКИ НЕМАЄ</p>`;
              container.appendChild(msg);
            }
          } else if (existingNoMsg) {
            existingNoMsg.remove();
          }

          container.style.opacity = "1";
          container.style.transform = "translateY(0)";
        }, 300);
      };
      window.closePanels = function () {
        document.getElementById("cart-panel").classList.remove("active");
        document.getElementById("fav-panel").classList.remove("active");
        document.getElementById("side-panel").classList.remove("active");
        document.getElementById("overlay").style.display = "none";
      };

      // Відкриття кошика
      document.getElementById("cart-trigger").onclick = () => {
        document.getElementById("cart-panel").classList.add("active");
        document.getElementById("overlay").style.display = "block";
      };

      // Відкриття Вибраного
      document.getElementById("fav-trigger").onclick = () => {
        document.getElementById("fav-panel").classList.add("active");
        document.getElementById("overlay").style.display = "block";
      };
    </script>
  </body>
</html>
